# nextTick

–í–æ Vue.js DOM –∏–∑–º–µ–Ω—è–µ—Ç—Å—è "—Å–∞–º" –∫–∞–∫ —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –ù–æ —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ. –ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –¥–µ–π—Å—Ç–≤–∏–π, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é, —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ–º –Ω–æ–≤–æ–≥–æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –¥–µ—Ä–µ–≤–∞, —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö DOM, –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ DOM. –ò –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —ç—Ç–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∑–Ω–∞—á–µ–Ω–∏—è **–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ**.

–û–±—ã—á–Ω–æ–π —ç—Ç–æ –Ω–µ —Å–æ–∑–¥–∞—ë—Ç –ø—Ä–æ–±–ª–µ–º, —Ç–∞–∫ –∫–∞–∫ –º—ã –Ω–µ –º–∞–Ω–∏–ø—É–ª–∏—Ä—É–µ–º —Ä–µ–∞–ª—å–Ω—ã–º DOM. –ù–æ –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–∏—Ç—É–∞—Ü–∏–π, –∫–æ–≥–¥–∞ —ç—Ç–æ –º–æ–∂–µ—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è.

### –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö —Å–≤–æ–π—Å—Ç–≤ DOM —ç–ª–µ–º–µ–Ω—Ç–æ–≤ 

–ò–Ω–æ–≥–¥–∞ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∞—Ç—å —Ç–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ DOM, –∫–∞–∫ —Ä–∞–∑–º–µ—Ä —ç–ª–µ–º–µ–Ω—Ç–æ–≤, –ø–æ–∑–∏—Ü–∏—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –∏ —Ç.–¥.  

```vue
<ul ref="list">
  <li v-for="item in items">{{ item }}</li>
</ul>
```
```javascript
addItem(newItem) {
  this.items.push(newItem);
  this.$refs['list'].clientHeight; // ?
}
```

–ö–∞–∂–µ—Ç—Å—è, —á—Ç–æ –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ `item` –¥–æ–ª–∂–µ–Ω —É–≤–µ–ª–∏—á–∏—Ç—å—Å—è —Å–ø–∏—Å–æ–∫ –∏ –µ–≥–æ –≤—ã—Å–æ—Ç–∞, –∫–æ—Ç–æ—Ä–∞—è —Å—Ä–∞–∑—É –¥–æ—Å—Ç—É–ø–Ω–∞ (–º—ã –≤–µ–¥—å –Ω–µ –¥–µ–ª–∞–ª–∏ —Å–∞–º–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π?).

–û–¥–Ω–∞–∫–æ –≤ –º–æ–º–µ–Ω—Ç –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ `clientHeight` DOM –µ—â—ë –Ω–µ –±—ã–ª –æ–±–Ω–æ–≤–ª—ë–Ω, –∏ –±—É–¥–µ—Ç –ø–æ–ª—É—á–µ–Ω–∞ —Å—Ç–∞—Ä–∞—è –≤—ã—Å–æ—Ç–∞.

### –û–±—Ä–∞—â–µ–Ω–∏–µ –∫ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –ø–æ—è–≤–ª—è—é—â–µ–º—É—Å—è —É–∑–ª—É

–ê–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –µ—Å–ª–∏ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ —É–∑–ª—É, –ø–æ—è–≤–ª—è—é—â–µ–º—É—Å—è –≤ —à–∞–±–ª–æ–Ω–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏.

```vue
<input v-if="show" ref="input" />
```

```javascript
// show === false
this.show = true;
this.$refs['input'] // undefined
this.$refs['input'].focus(); // –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
```

–û—Ç–æ–±—Ä–∞–∂–∞–µ–º –ø–æ–ª–µ –≤–≤–æ–¥–∞ –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞ –Ω–µ–≥–æ —Ñ–æ–∫—É—Å. –ù–æ, —Ö–æ—Ç—è –≤ –º–æ–º–µ–Ω—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ñ–æ–∫—É—Å–∞ —É–∂–µ `show === true`, —É–∑–ª–∞ –≤ DOM –µ—â—ë –Ω–µ—Ç, –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –æ—à–∏–±–∫–∞.

### –ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å —Ä–∞–∑–±–∏—Ç—å –æ–¥–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ DOM –Ω–∞ –¥–≤–∞

–ò–Ω–æ–≥–¥–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏, —Ç—Ä–µ–±—É–µ—Ç—Å—è, —á—Ç–æ–±—ã DOM –ø—Ä–æ—à—ë–ª —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ—Å—Ç–æ—è–Ω–∏–π. –î–æ–ø—É—Å—Ç–∏–º, —á—Ç–æ —É –Ω–∞—Å –µ—Å—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `<progress-bar>`, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–≤–æ–¥–∏—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å –ø—Ä–æ—Å—Ç—ã–º –±–ª–æ–∫–æ–º –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π —à–∏—Ä–∏–Ω—ã. –ü—Ä–∏ —ç—Ç–æ–º, —á—Ç–æ–±—ã –ø—Ä–æ–≥—Ä–µ—Å—Å –∏–∑–º–µ–Ω—è–ª—Å—è –ø–ª–∞–≤–Ω–æ, –¥–æ–±–∞–≤–ª–µ–Ω `css transition`. 

```vue
<template>
  <div class="progress-container">
    <div class="progress" :style="`width: ${progress}%;`"></div>
  </div>
</template>

<script>
export default {
  props: ['progress']
}
</script>

<style scoped>
.progress{
  background-color: blue;
  transition: width 0.5s;
}
</style>
```

–ó–∞—Ç–µ–º –≤ –∫–∞–∫–æ–π-—Ç–æ –º–æ–º–µ–Ω—Ç –º—ã –∑–∞—Ö–æ—Ç–∏–º –µ–≥–æ "–ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å".
```javascript
// progress === 100;
this.progress = 0;
this.progress = 50;
```

–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ: –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–ª–∞–≤–Ω–æ –ø–∞–¥–∞–µ—Ç —Å–æ 100 –¥–æ 0, –∑–∞—Ç–µ–º –ø–ª–∞–≤–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –¥–æ 50.

–§–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ: –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–ª–∞–≤–Ω–æ –ø–∞–¥–∞–µ—Ç —Å 100 –¥–æ 50.

### –î—Ä—É–≥–∏–µ –∫–µ–π—Å—ã

- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–æ–º–µ–Ω—Ç–∞, –∫–æ–≥–¥–∞ —Å—Ä–µ–Ω–¥–µ—Ä–∏–ª—Å—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ü–µ–ª–∏–∫–æ–º —Å–æ —Å–≤–æ–∏–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º (`mounted` —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–æ—Å–ª–µ —Ä–µ–Ω–¥–µ—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, –Ω–æ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ);
- –†–∞–±–æ—Ç–∞ —Å–æ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–º–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏;
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ;
- –û—Ç–ª–∞–¥–∫–∞.

### nextTick

–ü–µ—Ä–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤ –≥–æ–ª–æ–≤—É (–æ—Å–æ–±–µ–Ω–Ω–æ –Ω–∞—á–∏–Ω–∞—é—â–∏–º) -- —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å `setTimeout()` –Ω–∞ –∫–∞–∫–æ–µ-—Ç–æ –Ω–µ–±–æ–ª—å—à–æ–µ –≤—Ä–µ–º—è. –ò —ç—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –¥–∞–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç! 

–ù–æ, –∫–∞–∫ –∏ –≤ —Ä–µ—à–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç–∏, —ç—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –Ω–µ–≤–µ—Ä–Ω–æ–µ. –≠—Ç–æ –∫–æ—Å—Ç—ã–ª—å, –≤ –∫–æ—Ç–æ—Ä–æ–º –Ω–∞–¥–æ —É–≥–∞–¥–∞—Ç—å –ø–æ–¥—Ö–æ–¥—è—â—É—é –∑–∞–¥–µ—Ä–∂–∫—É.

–í–æ Vue.js –µ—Å—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ `$nextTick` —É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ `Vue.nextTick`.

–≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–π –∫–æ–¥ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è DOM –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –¥–≤—É—Ö –≤–∞—Ä–∏–∞–Ω—Ç–∞—Ö. –õ–∏–±–æ –≤—ã–∑—ã–≤–∞–µ—Ç –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π callback, –ª–∏–±–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ–º–∏—Å, –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω–æ.

### –ó–∞–¥–∞—á–∞

–î–∞–Ω–∞ –º–∞–ª–µ–Ω—å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è "–º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞". –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `MessegesList` –≤—ã–≤–æ–¥–∏—Ç —Å–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π, –∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `MiniMessenger` —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –º–∞–ª–µ–Ω—å–∫–∏–π –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä: –¥–∞—ë—Ç —Ñ–æ—Ä–º—É –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –∏—Ö –≤—ã–≤–æ–¥ —á–µ—Ä–µ–∑ `MessegesList`.

–ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ —Ä–∞–∑–º–µ—Ä—É, –∞ –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤–Ω–∏–∑. –¢—Ä–µ–±—É–µ—Ç—Å—è –∏–∑–º–µ–Ω–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `MiniMessenger` —Ç–∞–∫, —á—Ç–æ–±—ã –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è —Å–ø–∏—Å–æ–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–∫—Ä—É—á–∏–≤–∞–ª—Å—è –≤–Ω–∏–∑.

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ nextTick: [https://vuejs.org/v2/guide/reactivity.html#Async-Update-Queue](https://vuejs.org/v2/guide/reactivity.html#Async-Update-Queue).  

<img src="https://i.imgur.com/eZ8ObrU.gif" alt="Example" />

---

### –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

üìù –î–ª—è —Ä–µ—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª: `components/MiniMessenger.vue`.

üöÄ –ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞ –¥–ª—è —Ä—É—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: `npm run vue-serve`;<br>
–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ [http://localhost:8080/5-module-8-task](http://localhost:8080/5-module-8-task).

üí¨ –ó–∞–¥–∞—á–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é –Ω–∞ Code Review.
